{"version":3,"sources":["node_modules/browser-pack/_prelude.js","source/ContributorWidget.ts","source/Json.ts","source/Main.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import { getJsonFromUrl } from \"./Json\";\nimport { getJsonCallback } from \"./Json\";\n\nfunction sortByContributions(x: Contributor, y: Contributor) {\n  return  y.contributions - x.contributions;\n}\n\nexport interface ContributorWidgetConfig {\n    targetDivId: string\n}\n\nexport interface Contributor {\n    contributions:number,\n    html_url: string,\n    login: string\n}\n\nexport class ContributorWidget {\n    configJson: any;\n    contributorsJson: Contributor[];\n\n    constructor() {\n        var widgetDivs = document.getElementsByClassName(\"gh-contrib-widget\");\n        for(var i = 0; i < widgetDivs.length; i++) {\n            var targetDiv = widgetDivs.item(i);\n            this.loadData(targetDiv);\n        }\n    }\n\n    loadData(targetDiv: any): void {\n        var jsonUrl: string =\n            'https://api.github.com/repos/' + targetDiv.dataset.repository + '/contributors';\n        var dataHandler = function(widget: any, error: string, data: Contributor[]){\n            if (error !== null) {\n                console.log('Could not load data: ' + error);\n            } else {\n                widget.contributorsJson = data;\n                widget.render(targetDiv);\n            }\n        }\n        getJsonCallback(this, jsonUrl, dataHandler);\n    }\n\n    render(targetDiv: any): void {\n        var data = this.contributorsJson;\n        if (targetDiv != null) {\n        data.sort(sortByContributions);\n        var blockedUsers = new Array(\"gitter-badger\");\n        for(var n=0;n<data.length;n++){\n            var contributor: Contributor = data[n];\n            if(blockedUsers.indexOf(contributor.login) == -1) {\n                var contributorDiv = document.createElement('div');\n                var contributorHtml = '<a href=\\\"' + contributor.html_url + '\\\" target=\\\"_blank\\\">';\n                contributorHtml += contributor.login;\n                contributorHtml += '</a></br>';\n                contributorDiv.innerHTML = contributorHtml;\n                targetDiv.appendChild(contributorDiv);\n            }\n        }\n    } else {\n        console.log('Target diff for contributions widget with id ' + this.configJson.targetDivId + ' not found.');\n    }\n    }\n}\n","export function getJsonCallback(widget: any, url: any, callback: any) {\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url, true);\n  xhr.responseType = 'json';\n  xhr.onload = function() {\n    var status = xhr.status;\n    if (status === 200) {\n        callback(widget, null, xhr.response);\n    } else {\n        callback(widget, status, xhr.response);\n    }\n  };\n  xhr.send();\n};\n\nexport function getJsonFromUrl(url: string): any {\n    var xhr = new XMLHttpRequest();\n\n    xhr.open('GET', url, true);\n    xhr.responseType = 'json';\n    xhr.onload = function() {\n        var status = xhr.status;\n        if (status !== 200) {\n            throw new Error('Got error ' + status + ' for URL ' + url);\n        }\n    };\n    xhr.send();\n};\n","import { getJsonFromUrl } from \"./Json\";\nimport { Contributor } from \"./ContributorWidget\";\nimport { ContributorWidgetConfig } from \"./ContributorWidget\";\nimport { ContributorWidget } from \"./ContributorWidget\";\n\nfunction installGithubContributionWidget(): void {\n    try {\n        var widget: ContributorWidget = new ContributorWidget();\n    } catch (e) {\n        console.log(e.name + ': ' + e.message);\n    }\n}\n\n(<any>window).installGithubContributionWidget = installGithubContributionWidget;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzb3VyY2UvQ29udHJpYnV0b3JXaWRnZXQudHMiLCJzb3VyY2UvSnNvbi50cyIsInNvdXJjZS9NYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztBQ0NBLHFCQUF5QztBQUV6Qyw2QkFBNkIsQUFBYyxHQUFFLEFBQWM7QUFDekQsQUFBTSxXQUFFLEFBQUMsRUFBQyxBQUFhLGdCQUFHLEFBQUMsRUFBQyxBQUFhLEFBQUMsQUFDNUM7QUFBQyxBQVlEOzs7QUFJSTs7O0FBQ0ksWUFBSSxBQUFVLGFBQUcsQUFBUSxTQUFDLEFBQXNCLHVCQUFDLEFBQW1CLEFBQUMsQUFBQztBQUN0RSxBQUFHLGFBQUMsSUFBSSxBQUFDLElBQUcsQUFBQyxHQUFFLEFBQUMsSUFBRyxBQUFVLFdBQUMsQUFBTSxRQUFFLEFBQUMsQUFBRSxLQUFFLEFBQUM7QUFDeEMsZ0JBQUksQUFBUyxZQUFHLEFBQVUsV0FBQyxBQUFJLEtBQUMsQUFBQyxBQUFDLEFBQUM7QUFDbkMsQUFBSSxpQkFBQyxBQUFRLFNBQUMsQUFBUyxBQUFDLEFBQUMsQUFDN0I7QUFBQyxBQUNMO0FBQUMsQUFFRCxBQUFROzs7O2lDQUFDLEFBQWM7QUFDbkIsZ0JBQUksQUFBTyxVQUNQLEFBQStCLGtDQUFHLEFBQVMsVUFBQyxBQUFPLFFBQUMsQUFBVSxhQUFHLEFBQWUsQUFBQztBQUNyRixnQkFBSSxBQUFXLGNBQUcscUJBQVMsQUFBVyxRQUFFLEFBQWEsT0FBRSxBQUFtQjtBQUN0RSxBQUFFLEFBQUMsb0JBQUMsQUFBSyxVQUFLLEFBQUksQUFBQyxNQUFDLEFBQUM7QUFDakIsQUFBTyw0QkFBQyxBQUFHLElBQUMsQUFBdUIsMEJBQUcsQUFBSyxBQUFDLEFBQUMsQUFDakQ7QUFBQyxBQUFDLEFBQUksdUJBQUMsQUFBQztBQUNKLEFBQU0sMkJBQUMsQUFBZ0IsbUJBQUcsQUFBSSxBQUFDO0FBQy9CLEFBQU0sMkJBQUMs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QUFDO0FBQ2pCLGtCQUFNLElBQUksQUFBSyxNQUFDLEFBQVksZUFBRyxBQUFNLFNBQUcsQUFBVyxjQUFHLEFBQUcsQUFBQyxBQUFDLEFBQy9EO0FBQUMsQUFDTDtBQUFDLEFBQUM7QUFDRixBQUFHLFFBQUMsQUFBSSxBQUFFLEFBQUMsQUFDZjtBQUFDO0FBWkQseUJBWUM7QUFBQSxBQUFDOzs7Ozs7QUN4QkYsa0NBQXdEO0FBRXhEO0FBQ0ksUUFBSSxBQUFDO0FBQ0QsWUFBSSxBQUFNLFNBQXNCLElBQUksb0JBQWlCLEFBQUUsQUFBQyxBQUM1RDtBQUFDLE1BQUMsQUFBSyxBQUFDLE9BQUMsQUFBQyxBQUFDLEdBQUMsQUFBQztBQUNULEFBQU8sZ0JBQUMsQUFBRyxJQUFDLEFBQUMsRUFBQyxBQUFJLE9BQUcsQUFBSSxPQUFHLEFBQUMsRUFBQyxBQUFPLEFBQUMsQUFBQyxBQUMzQztBQUFDLEFBQ0w7QUFBQztBQUVLLEFBQU8sT0FBQyxBQUErQixrQ0FBRyxBQUErQixBQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7IGdldEpzb25Gcm9tVXJsIH0gZnJvbSBcIi4vSnNvblwiO1xuaW1wb3J0IHsgZ2V0SnNvbkNhbGxiYWNrIH0gZnJvbSBcIi4vSnNvblwiO1xuXG5mdW5jdGlvbiBzb3J0QnlDb250cmlidXRpb25zKHg6IENvbnRyaWJ1dG9yLCB5OiBDb250cmlidXRvcikge1xuICByZXR1cm4gIHkuY29udHJpYnV0aW9ucyAtIHguY29udHJpYnV0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb250cmlidXRvcldpZGdldENvbmZpZyB7XG4gICAgdGFyZ2V0RGl2SWQ6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRyaWJ1dG9yIHtcbiAgICBjb250cmlidXRpb25zOm51bWJlcixcbiAgICBodG1sX3VybDogc3RyaW5nLFxuICAgIGxvZ2luOiBzdHJpbmdcbn1cblxuZXhwb3J0IGNsYXNzIENvbnRyaWJ1dG9yV2lkZ2V0IHtcbiAgICBjb25maWdKc29uOiBhbnk7XG4gICAgY29udHJpYnV0b3JzSnNvbjogQ29udHJpYnV0b3JbXTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB2YXIgd2lkZ2V0RGl2cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJnaC1jb250cmliLXdpZGdldFwiKTtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHdpZGdldERpdnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXREaXYgPSB3aWRnZXREaXZzLml0ZW0oaSk7XG4gICAgICAgICAgICB0aGlzLmxvYWREYXRhKHRhcmdldERpdik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2FkRGF0YSh0YXJnZXREaXY6IGFueSk6IHZvaWQge1xuICAgICAgICB2YXIganNvblVybDogc3RyaW5nID1cbiAgICAgICAgICAgICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLycgKyB0YXJnZXREaXYuZGF0YXNldC5yZXBvc2l0b3J5ICsgJy9jb250cmlidXRvcnMnO1xuICAgICAgICB2YXIgZGF0YUhhbmRsZXIgPSBmdW5jdGlvbih3aWRnZXQ6IGFueSwgZXJyb3I6IHN0cmluZywgZGF0YTogQ29udHJpYnV0b3JbXSl7XG4gICAgICAgICAgICBpZiAoZXJyb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ291bGQgbm90IGxvYWQgZGF0YTogJyArIGVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2lkZ2V0LmNvbnRyaWJ1dG9yc0pzb24gPSBkYXRhO1xuICAgICAgICAgICAgICAgIHdpZGdldC5yZW5kZXIodGFyZ2V0RGl2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnZXRKc29uQ2FsbGJhY2sodGhpcywganNvblVybCwgZGF0YUhhbmRsZXIpO1xuICAgIH1cblxuICAgIHJlbmRlcih0YXJnZXREaXY6IGFueSk6IHZvaWQge1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuY29udHJpYnV0b3JzSnNvbjtcbiAgICAgICAgaWYgKHRhcmdldERpdiAhPSBudWxsKSB7XG4gICAgICAgIGRhdGEuc29ydChzb3J0QnlDb250cmlidXRpb25zKTtcbiAgICAgICAgdmFyIGJsb2NrZWRVc2VycyA9IG5ldyBBcnJheShcImdpdHRlci1iYWRnZXJcIik7XG4gICAgICAgIGZvcih2YXIgbj0wO248ZGF0YS5sZW5ndGg7bisrKXtcbiAgICAgICAgICAgIHZhciBjb250cmlidXRvcjogQ29udHJpYnV0b3IgPSBkYXRhW25dO1xuICAgICAgICAgICAgaWYoYmxvY2tlZFVzZXJzLmluZGV4T2YoY29udHJpYnV0b3IubG9naW4pID09IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRyaWJ1dG9yRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRyaWJ1dG9ySHRtbCA9ICc8YSBocmVmPVxcXCInICsgY29udHJpYnV0b3IuaHRtbF91cmwgKyAnXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+JztcbiAgICAgICAgICAgICAgICBjb250cmlidXRvckh0bWwgKz0gY29udHJpYnV0b3IubG9naW47XG4gICAgICAgICAgICAgICAgY29udHJpYnV0b3JIdG1sICs9ICc8L2E+PC9icj4nO1xuICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yRGl2LmlubmVySFRNTCA9IGNvbnRyaWJ1dG9ySHRtbDtcbiAgICAgICAgICAgICAgICB0YXJnZXREaXYuYXBwZW5kQ2hpbGQoY29udHJpYnV0b3JEaXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1RhcmdldCBkaWZmIGZvciBjb250cmlidXRpb25zIHdpZGdldCB3aXRoIGlkICcgKyB0aGlzLmNvbmZpZ0pzb24udGFyZ2V0RGl2SWQgKyAnIG5vdCBmb3VuZC4nKTtcbiAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldEpzb25DYWxsYmFjayh3aWRnZXQ6IGFueSwgdXJsOiBhbnksIGNhbGxiYWNrOiBhbnkpIHtcbiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdGF0dXMgPSB4aHIuc3RhdHVzO1xuICAgIGlmIChzdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBjYWxsYmFjayh3aWRnZXQsIG51bGwsIHhoci5yZXNwb25zZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sod2lkZ2V0LCBzdGF0dXMsIHhoci5yZXNwb25zZSk7XG4gICAgfVxuICB9O1xuICB4aHIuc2VuZCgpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEpzb25Gcm9tVXJsKHVybDogc3RyaW5nKTogYW55IHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN0YXR1cyA9IHhoci5zdGF0dXM7XG4gICAgICAgIGlmIChzdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb3QgZXJyb3IgJyArIHN0YXR1cyArICcgZm9yIFVSTCAnICsgdXJsKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgeGhyLnNlbmQoKTtcbn07XG4iLCJpbXBvcnQgeyBnZXRKc29uRnJvbVVybCB9IGZyb20gXCIuL0pzb25cIjtcbmltcG9ydCB7IENvbnRyaWJ1dG9yIH0gZnJvbSBcIi4vQ29udHJpYnV0b3JXaWRnZXRcIjtcbmltcG9ydCB7IENvbnRyaWJ1dG9yV2lkZ2V0Q29uZmlnIH0gZnJvbSBcIi4vQ29udHJpYnV0b3JXaWRnZXRcIjtcbmltcG9ydCB7IENvbnRyaWJ1dG9yV2lkZ2V0IH0gZnJvbSBcIi4vQ29udHJpYnV0b3JXaWRnZXRcIjtcblxuZnVuY3Rpb24gaW5zdGFsbEdpdGh1YkNvbnRyaWJ1dGlvbldpZGdldCgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgICB2YXIgd2lkZ2V0OiBDb250cmlidXRvcldpZGdldCA9IG5ldyBDb250cmlidXRvcldpZGdldCgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZS5uYW1lICsgJzogJyArIGUubWVzc2FnZSk7XG4gICAgfVxufVxuXG4oPGFueT53aW5kb3cpLmluc3RhbGxHaXRodWJDb250cmlidXRpb25XaWRnZXQgPSBpbnN0YWxsR2l0aHViQ29udHJpYnV0aW9uV2lkZ2V0O1xuIl19"}